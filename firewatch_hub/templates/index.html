{% extends "base.html" %}
{% block content %}
  <h1>Firewatch</h1>

  {% macro event_table(events) %}
    <table class="table table-sm">
      <colgroup>
        <col>
        <col>
        <col style="max-width: 2em">
      </colgroup>
      <thead class="thead-default">
        <tr>
          <th>Host</th>
          <th>Date</th>
          <th>Log path</th>
          <th>Message</th>
        </tr>
      </thead>
      <tbody>
        {% for event in events %}
          <tr>
            <td style="min-width: 7em; max-width: 10em">{{ event['host'] }}</td>
            <td style="min-width: 5em; max-width: 8em">
              {{ event['nice_date'] }}
            </td>
            <td style="min-width: 8em; max-width: 12em">
              <small>{{ event['log_dir'] }}/</small><wbr><b>{{ event['log_filename'] }}</b>
            </td>
            <td>
              <pre>{{ event['message'] }}</pre>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endmacro %}

  <h2>In last hour</h2>
  {{ event_table(last_hour_events) }}

  <h2>Today</h2>
  {{ event_table(today_events) }}

  <h2>Before</h2>
  {{ event_table(rest_events) }}

{% endblock %}
